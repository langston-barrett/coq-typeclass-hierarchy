<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>TypeclassHierarchy.Util.FunctionSetoid</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library TypeclassHierarchy.Util.FunctionSetoid</h1>

<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl3/stdlib/Coq.Relations.Relation_Definitions.html#"><span class="id" title="library">Relation_Definitions</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl3/stdlib/Coq.Setoids.Setoid.html#"><span class="id" title="library">Coq.Setoids.Setoid</span></a>.<br/>

<br/>
</div>

<div class="doc">
  The only worthwhile instances of typeclasses are lawful ones. Therefore, this
  library packages the interfaces together with proofs that the laws hold.
  However, some laws include assertions of function equality (think `fmap id =
  id`), which is not a native concept to Coq. Therefore, we use a Setoid which
  encodes extensional equality and allows us to use the setoid rewriting tactics
  when proving it.
 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a name="ExtensionalEquality"><span class="id" title="section">ExtensionalEquality</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a name="ExtensionalEquality.A"><span class="id" title="variable">A</span></a> <a name="ExtensionalEquality.B"><span class="id" title="variable">B</span></a> : <span class="id" title="keyword">Type</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="extensional_equality"><span class="id" title="definition">extensional_equality</span></a> (<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <a class="idref" href="TypeclassHierarchy.Util.FunctionSetoid.html#ExtensionalEquality.A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl3/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="TypeclassHierarchy.Util.FunctionSetoid.html#ExtensionalEquality.B"><span class="id" title="variable">B</span></a>) : <span class="id" title="keyword">Prop</span> := <span class="id" title="keyword">∀</span> <span class="id" title="var">a</span> : <a class="idref" href="TypeclassHierarchy.Util.FunctionSetoid.html#ExtensionalEquality.A"><span class="id" title="variable">A</span></a>, <a class="idref" href="TypeclassHierarchy.Util.FunctionSetoid.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="TypeclassHierarchy.Util.FunctionSetoid.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl3/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="TypeclassHierarchy.Util.FunctionSetoid.html#g"><span class="id" title="variable">g</span></a> <a class="idref" href="TypeclassHierarchy.Util.FunctionSetoid.html#a"><span class="id" title="variable">a</span></a>.<br/>

<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Ltac</span> <span class="id" title="var">dnry</span> <span class="id" title="var">x</span> := <span class="id" title="tactic">unfold</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="TypeclassHierarchy.Util.FunctionSetoid.html#extensional_equality"><span class="id" title="definition">extensional_equality</span></a> <span class="id" title="keyword">in</span> *; <span class="id" title="tactic">intros</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="extensional_equality_refl"><span class="id" title="lemma">extensional_equality_refl</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/8.5pl3/stdlib/Coq.Relations.Relation_Definitions.html#reflexive"><span class="id" title="definition">reflexive</span></a> <span class="id" title="var">_</span> <a class="idref" href="TypeclassHierarchy.Util.FunctionSetoid.html#extensional_equality"><span class="id" title="definition">extensional_equality</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">dnry</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl3/stdlib/Coq.Relations.Relation_Definitions.html#reflexive"><span class="id" title="definition">reflexive</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="extensional_equality_sym"><span class="id" title="lemma">extensional_equality_sym</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.5pl3/stdlib/Coq.Relations.Relation_Definitions.html#symmetric"><span class="id" title="definition">symmetric</span></a> <span class="id" title="var">_</span> <a class="idref" href="TypeclassHierarchy.Util.FunctionSetoid.html#extensional_equality"><span class="id" title="definition">extensional_equality</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">dnry</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl3/stdlib/Coq.Relations.Relation_Definitions.html#symmetric"><span class="id" title="definition">symmetric</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl3/stdlib/Coq.Init.Logic.html#eq_sym"><span class="id" title="lemma">eq_sym</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">H</span> <span class="id" title="var">a</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="extensional_equality_trans"><span class="id" title="lemma">extensional_equality_trans</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.5pl3/stdlib/Coq.Relations.Relation_Definitions.html#transitive"><span class="id" title="definition">transitive</span></a> <span class="id" title="var">_</span> <a class="idref" href="TypeclassHierarchy.Util.FunctionSetoid.html#extensional_equality"><span class="id" title="definition">extensional_equality</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">dnry</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl3/stdlib/Coq.Relations.Relation_Definitions.html#transitive"><span class="id" title="definition">transitive</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">H</span> <span class="id" title="var">a</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">H0</span> <span class="id" title="var">a</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Add</span> <span class="id" title="var">Parametric</span> <span class="id" title="var">Relation</span> : (<a class="idref" href="TypeclassHierarchy.Util.FunctionSetoid.html#ExtensionalEquality.A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl3/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="TypeclassHierarchy.Util.FunctionSetoid.html#ExtensionalEquality.B"><span class="id" title="variable">B</span></a>) <a class="idref" href="TypeclassHierarchy.Util.FunctionSetoid.html#extensional_equality"><span class="id" title="definition">extensional_equality</span></a><br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span> <span class="id" title="var">proved</span> <span class="id" title="tactic">by</span> <a class="idref" href="TypeclassHierarchy.Util.FunctionSetoid.html#extensional_equality_refl"><span class="id" title="lemma">extensional_equality_refl</span></a><br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="var">proved</span> <span class="id" title="tactic">by</span> <a class="idref" href="TypeclassHierarchy.Util.FunctionSetoid.html#extensional_equality_sym"><span class="id" title="lemma">extensional_equality_sym</span></a><br/>
&nbsp;&nbsp;<span class="id" title="tactic">transitivity</span> <span class="id" title="var">proved</span> <span class="id" title="tactic">by</span> <a class="idref" href="TypeclassHierarchy.Util.FunctionSetoid.html#extensional_equality_trans"><span class="id" title="lemma">extensional_equality_trans</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">as</span> <span class="id" title="var">extensional_equality_rel</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="TypeclassHierarchy.Util.FunctionSetoid.html#ExtensionalEquality"><span class="id" title="section">ExtensionalEquality</span></a>.<br/>

<br/>
</div>

<div class="doc">
 Since composition is the most common operation on functions, we also provide a
 proof that it is proper with respect to extensional equality as defined above
 as a Lemma.
 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">MathClasses.interfaces.canonical_names</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a name="Composition"><span class="id" title="section">Composition</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a name="Composition.A"><span class="id" title="variable">A</span></a> <a name="Composition.B"><span class="id" title="variable">B</span></a> <a name="Composition.C"><span class="id" title="variable">C</span></a> : <span class="id" title="keyword">Type</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="composition_proper"><span class="id" title="lemma">composition_proper</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/8.5pl3/stdlib/Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.5pl3/stdlib/Coq.Classes.Morphisms.html#5bcff5fca4c3a87e683dd8ca07bab63f"><span class="id" title="notation">(</span></a>@<a class="idref" href="TypeclassHierarchy.Util.FunctionSetoid.html#extensional_equality"><span class="id" title="definition">extensional_equality</span></a> <a class="idref" href="TypeclassHierarchy.Util.FunctionSetoid.html#Composition.B"><span class="id" title="variable">B</span></a> <a class="idref" href="TypeclassHierarchy.Util.FunctionSetoid.html#Composition.C"><span class="id" title="variable">C</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl3/stdlib/Coq.Classes.Morphisms.html#5bcff5fca4c3a87e683dd8ca07bab63f"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl3/stdlib/Coq.Classes.Morphisms.html#5bcff5fca4c3a87e683dd8ca07bab63f"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl3/stdlib/Coq.Classes.Morphisms.html#5bcff5fca4c3a87e683dd8ca07bab63f"><span class="id" title="notation">(</span></a>@<a class="idref" href="TypeclassHierarchy.Util.FunctionSetoid.html#extensional_equality"><span class="id" title="definition">extensional_equality</span></a> <a class="idref" href="TypeclassHierarchy.Util.FunctionSetoid.html#Composition.A"><span class="id" title="variable">A</span></a> <a class="idref" href="TypeclassHierarchy.Util.FunctionSetoid.html#Composition.B"><span class="id" title="variable">B</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl3/stdlib/Coq.Classes.Morphisms.html#5bcff5fca4c3a87e683dd8ca07bab63f"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl3/stdlib/Coq.Classes.Morphisms.html#5bcff5fca4c3a87e683dd8ca07bab63f"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5pl3/stdlib/Coq.Classes.Morphisms.html#5bcff5fca4c3a87e683dd8ca07bab63f"><span class="id" title="notation">(</span></a>@<a class="idref" href="TypeclassHierarchy.Util.FunctionSetoid.html#extensional_equality"><span class="id" title="definition">extensional_equality</span></a> <a class="idref" href="TypeclassHierarchy.Util.FunctionSetoid.html#Composition.A"><span class="id" title="variable">A</span></a> <a class="idref" href="TypeclassHierarchy.Util.FunctionSetoid.html#Composition.C"><span class="id" title="variable">C</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5pl3/stdlib/Coq.Classes.Morphisms.html#5bcff5fca4c3a87e683dd8ca07bab63f"><span class="id" title="notation">)</span></a>) <span class="id" title="notation">(∘)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">compute</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">H0</span> <span class="id" title="var">a</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">H</span> (<span class="id" title="var">y0</span> <span class="id" title="var">a</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="TypeclassHierarchy.Util.FunctionSetoid.html#Composition"><span class="id" title="section">Composition</span></a>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>